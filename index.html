<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Akshaya Milk Delivery — PWA</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/icons/icon-192.png" />
  <meta name="theme-color" content="#1976d2">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img id="brandLogo" src="icons/icon-192.png" alt="Akshaya logo" />
      <h1 id="brandTitle">Akshaya Milk Delivery</h1>
    </div>
    <nav>
      <label for="roleSelect" class="sr-only">Role</label>
      <select id="roleSelect" aria-label="Select role">
        <option value="owner">Owner</option>
        <option value="agency">Agency</option>
        <option value="customer">Customer</option>
      </select>
      <button id="btnLoginDemo">Login (Demo)</button>
      <a id="repoLink" href="#" target="_blank" rel="noopener">Repo</a>
    </nav>
  </header>

  <main id="app">
    <!-- Login / Session info -->
    <section id="loginSection" class="card">
      <h2>Quick Demo Login</h2>
      <form id="loginForm">
        <label>Email <input id="email" type="email" required></label>
        <label>Password <input id="password" type="password" required></label>
        <button type="submit">Sign in</button>
      </form>
      <p class="muted">Or use <strong>Login (Demo)</strong> to auto-fill demo creds.</p>
    </section>

    <!-- Owner portal -->
    <section id="ownerPortal" class="portal hidden">
      <h2>Owner Portal</h2>
      <div class="row">
        <div class="card w-40" id="ownerStats">
          <h3>Revenue</h3>
          <div id="ownerRevenue">₹0</div>
          <h4>Subscriptions</h4>
          <div id="ownerSubs"></div>
        </div>

        <div class="card w-60" id="ownerAgencies">
          <h3>Agencies</h3>
          <div id="agencyList"></div>
        </div>
      </div>
      <div class="card">
        <h3>Platform Analytics</h3>
        <pre id="ownerAnalytics"></pre>
      </div>
    </section>

    <!-- Agency portal -->
    <section id="agencyPortal" class="portal hidden">
      <h2>Agency Portal</h2>
      <div class="row">
        <div class="card w-30" id="agencyPanel">
          <h3>Brand</h3>
          <form id="brandForm">
            <label>Business name <input id="businessName"></label>
            <label>Brand color <input id="brandColor" type="color"></label>
            <label>Logo URL <input id="logoUrl" placeholder="https://..."></label>
            <button id="saveBrand" type="button">Save Brand</button>
          </form>

          <h4>Subscription</h4>
          <div id="trialBadge"></div>
        </div>

        <div class="card w-70" id="agencyCustomers">
          <h3>Customers</h3>
          <button id="btnAddCustomer">Add Customer</button>
          <div id="customersList"></div>
        </div>
      </div>

      <div class="card">
        <h3>Delivery Calendar</h3>
        <div id="deliveryCalendar"></div>
      </div>
    </section>

    <!-- Customer portal -->
    <section id="customerPortal" class="portal hidden">
      <h2>Customer Portal</h2>
      <div class="card">
        <h3>My Subscription</h3>
        <div id="customerSub"></div>
        <button id="btnPlaceOrder">Place / Pay (Mock)</button>
      </div>

      <div class="card">
        <h3>Delivery History</h3>
        <div id="customerHistory"></div>
      </div>

      <div class="card">
        <h3>Map</h3>
        <div id="mapContainer" class="map"></div>
        <div id="mapFallback" class="muted"></div>
      </div>
    </section>

    <!-- Modals -->
    <div id="modal" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content">
        <button id="modalClose" class="close">✕</button>
        <div id="modalBody"></div>
      </div>
    </div>

    <footer class="footer">
      <small>Built as a static PWA demo. <a href="https://github.com/your-username/Akshaya-Milk-Delivery" id="repoLink2" target="_blank">View repo</a></small>
    </footer>
  </main>

  <script src="app.js" defer></script>
  <script>
    // set repo link placeholders
    document.getElementById('repoLink').href = 'https://github.com/<your-username>/Akshaya-Milk-Delivery';
    document.getElementById('repoLink2').href = 'https://github.com/<your-username>/Akshaya-Milk-Delivery';
  </script>
</body>
</html>
